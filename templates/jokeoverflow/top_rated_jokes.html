{% extends 'jokeoverflow/base2.html' %}
{% load staticfiles %}
{% block title_block %}
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="{% static "css/topratedjokes.css" %}" rel="stylesheet">

<style>
input[type=text] {
    width: 230px;
    box-sizing: border-box;
    border: 2px solid #ccc;
    border-radius: 4px;
    font-size: 16px;
    background-color: white;
    background-image: url({% static "images/icons/search.gif" %});
    background-size: 30px;
    background-position: 10px 10px;
    background-repeat: no-repeat;
    padding: 12px 20px 12px 40px;
    -webkit-transition: width 0.4s ease-in-out;
    transition: width 0.4s ease-in-out;
}

input[type=text]:focus {
    width: 100%;
}
</style>

{% endblock %}
{% block body_block %}
<div class="container">
	<h1>This is the TOP RATED JOKES page</h1>

	<div class="row">
		<form>
		  <input type="text" name="search-joke" placeholder="Search for joke...">
		</form>

	</div>
	<div class="row">
		<div class="col-md-6 list-box">
		<h2> Most Liked Jokes </h2>
		<p>
			{% if topratedjokes %}
				<ul class="list-group joke-list">
				{% for joke in topratedjokes %}
							
<div class = "box-cont" >					
<a href="#joke{{joke.id}}">{{ joke.title }}</a>
						

</div>

<div id="joke{{joke.id}}" class="modalDialog">
<div>
	
  	<a href="#close" title="Close" class="close">&times;</a>
	<br>
    <div class = "pop-joke-title text-center">{{ joke.title }}</div>
	<br>
    <div class = "pop-joke-text">{{ joke.joke_text }}</div>
	<br>
<div class="row">
<div class="col-md-3 ">
	{% if user.is_authenticated %}
		<!--<button id="upvoteYES-image" class = "up-img"><img src="{% static "images/icons/upvoteYES.png" %}" ></button>-->
		<img class = "vote-icon" src="{% static "images/icons/upvoteYES.png" %}" alt="Upvote" /> 
	{% else %}
		<img class = "vote-icon" src="{% static "images/icons/upvoteNO.png" %}" alt="Upvote" />
	{% endif %}
{{ joke.upvotes }}

</div>
<div class="col-md-3 ">
	<img class = "vote-icon" src="{% static "images/icons/downvote.png" %}" alt="Upvote" /> 
	{{ joke.downvotes }}
</div>

<div class="col-md-6 comments-container">
	<p><br>Comments: <br>
			<div class="comment-field">
			  <dl class="dl">


		{% for comment in comments %}
			{% if comment.joke == joke %}
			  {% for user in users %}
			  {% if comment.made_by == user.user %}

			  <dt>
				  <hr>
				  <img src="{{ user.user_picture}}" alt="No profile picture"}>
				  <img src="{{ user.image_from }}" alt="No profile picture"}>
				  G {{ user.image_from }} H
				  <img {{user.user_picture}} > {{ comment.made_by}}</dt>

			  {% endif %}
			  {% endfor %}
			<dd>{{ comment.comment_text }} <br> <small>{{ comment.date_added}}</small></dd>
			  <hr>
			{% endif %}
		{% endfor %}
			</dl>
		</div>
			</p>
</div>
</div>
<hr>
<div class="row">
	<div class = "col-md-1">
		<p>
			{% for user in users %}
			{% if user.user == joke.added_by %}
				<img src="{{ user.user_picture}}" alt="No profile picture"}>
			{% endif %}
			{% endfor %}
		</p>
	</div>
	<div class = "col-md-5">
		<p>
			Joke Author: {{joke.added_by}}
			<br>
			Date Added: {{joke.date_added}}
		</p>
	</div>
	<div class = "col-md-6">
		<p>
			Make a Comment
		</p>
	</div>
</div>




</div>
</div>


				{% endfor %}
				</ul>
			{% else %}
				<strong>There are no jokes present.</strong>
			{% endif %}
		
		</p>
		</div>	
	</div>
<br>
</div>
{% endblock %}
