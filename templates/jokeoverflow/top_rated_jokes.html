{% extends 'jokeoverflow/base2.html' %}
{% load staticfiles %}
{% block title_block %}
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="{% static "css/topratedjokes.css" %}" rel="stylesheet">

<style>
input[type=text] {
    width: 100%;
    box-sizing: border-box;
    border: 2px solid #ccc;
    border-radius: 4px;
    font-size: 16px;
    background-color: white;
    background-image: url({% static "images/icons/search.gif" %});
    background-size: 30px;
    background-position: 10px 10px;
    background-repeat: no-repeat;
    padding: 12px 20px 12px 50px;
    -webkit-transition: width 0.4s ease-in-out;
    transition: width 0.4s ease-in-out;
}

input[type=text]:focus {
    width: 100%;
}
</style>

{% endblock %}
{% block body_block %}
<div class="container">
	<div class="text-center sc-page-title">
	<p>This is the TOP RATED JOKES page</p>
	</div>

	<div class="row">
		<div class = "col-md-3">
		</div>

		<div class="search-div col-md-6">
		<form>
		  <input class="sc-joke-search" type="text"  name="search-joke" placeholder="Search for joke...">
		</form>

		</div>

		<div class = "col-md-3">
		</div>
	</div>
		<br>
	<div class="row">
		<div class ="col-md-3">
		</div>
		<div class="col-md-6 list-box sc-list-box">
			<div class="box-title text-center"><p>Most Liked Jokes</p></div>
			<p>
				{% if topratedjokes %}
					<ul class="list-group joke-list">
						{% for joke in topratedjokes %}
							<div class = "box-cont" >
								<a href="#joke{{joke.id}}">{{ joke.title }}</a>
							</div>
							<div id="joke{{joke.id}}" class="modalDialog">
								<a href="#close" title="Close" class="close">&times;</a>
								<br>
								<div class = "pop-joke-title text-center">{{ joke.title }}</div>
								<br>
								<div class = "pop-joke-text">{{ joke.joke_text }}</div>
								<br>
								<div class="row">
									<div class="col-md-3 ">
				{% if user.is_authenticated %}
					<!--<button id="upvoteYES-image" class = "up-img"><img src="{% static "images/icons/upvoteYES.png" %}" ></button>-->
					<img class = "vote-icon" src="{% static "images/icons/upvoteYES.png" %}" alt="Upvote" />
				{% else %}
					<img class = "vote-icon" src="{% static "images/icons/upvoteNO.png" %}" alt="Upvote" />
				{% endif %}
				{{ joke.upvotes }}
			</div>
									<div class="col-md-3 ">
				<img class = "vote-icon" src="{% static "images/icons/downvote.png" %}" alt="Downvote" />
				{{ joke.downvotes }}
			</div>
									<div class="col-md-6 comments-container">
											<br>Comments: <br>
											<div class="comment-field">
												<hr>
												{% for comment in comments %}
												{% if comment.joke == joke %}
												{% for user in users %}
												{% if comment.made_by == user.user %}
												<div class="row">
													<div class="col-md-3 comment-profile-pic">
															<!--<img src="{{ user.user_picture}}" alt="No profile picture"}>-->
															<img src="{{ user.image_from }}" alt="No profile picture"}>
															<vr></vr>
														</div>
													<div class="col-md-9">
														{{ comment.comment_text }}
														<br>
														<small>{{ comment.made_by}}</small>
													</div>
												</div>
												{% endif %}
												{% endfor %}
												{% endif %}
												{% endfor %}
											</div>
										</div>
								</div>
								<div class="row">
									<div class = "col-md-1">
										<div>
											{% for user in users %}
											{% if user.user == joke.added_by %}
												<img src="{{ user.user_picture}}" alt="No profile picture"}>
											{% endif %}
											{% endfor %}
										</div>
									</div>
									<div class = "col-md-5">
										<div>
											Joke Author: {{joke.added_by}}
											<br>
											Date Added: {{joke.date_added}}
										</div>
									</div>
									<div class = "col-md-6">
										<div>
											<h1>Make a Comment</h1>
										</div>
									</div>
								</div>
							</div>
						{% endfor %}
					</ul>
			{% endif %}
			</p>
		</div>
	</div>



	<br>



	<div class="row">
	{% if cat_rated_jokes %}

		{% for cat in categories %}
			<div class = "col-md-5 list-box sc-list-box">
	<p>
	<div class="box-title text-center">Top Jokes in '{{ cat.title }}'</div>
				 <div class="joke-list">
			{% for joke in cat_rated_jokes|get_item:cat.title %}
				{{joke.title}} <br>
			{% endfor %}
					 <br>
				 </div>
			</div>
			<br><br>

			<br><br>
		{% endfor %}

	{% endif %}




</div>


</div>
{% endblock %}
